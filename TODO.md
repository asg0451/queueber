# TODOs (beyond inline comments)

- [X] (minor) make newtype safety stuff for db keys
- [X] (minor) set the rocksdb setting that helps with prefix scans
- [X] (minor) proper command setup (cli args, etc)
- [X] (minor) ci
- [ ] (minor) rocksdb settings tuning
- [X] (major) server concurrency (either normally or via partitioning)
- [X] (major) server parallelism
- [ ] (major) server/storage sharding
- [X] (major) move storage to an io thread pool
- [X] (feat) implement lease expiry via a background thread
- [X] (feat) implement poll in server
- [X] (minor) add polling timeout and num_items options
- [X] (major) fix race condition: concurrent polls can hand out the same messages
- [X] (feat) implement remove
- [ ] (feat) implement extend
- [X] (bugfix) e2e benchmark hangs / improve benchmarks
- [X] (bugfix) polling returns early if it's woken by a new message being added, *even if it isnt visible*.
- [X] (bugfix) poll-waiting isnt interrupted when a message becomes visible
- [X] (minor) clean up cursed client stress mode
- [ ] (minor) perf analysis on queueber while being stressed
- [X] (minor) integrate tokio console into queueber
- [X] (bugfix) stress test found this error with num workers = 4: `database integrity violated: main key not found`. fix it.
- [ ] (perf) improve performance and cpu utilization. see docs/perf-notes.md
